"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("react"),t=require("three"),n=require("@react-three/fiber");function u(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var o=u(r);const c=o.forwardRef((({url:r,distance:u=1,loop:c=!0,autoplay:s,...a},i)=>{const f=o.useRef(null);o.useImperativeHandle(i,(()=>f.current),[]);const l=n.useThree((({camera:e})=>e)),[d]=o.useState((()=>new t.AudioListener)),p=n.useLoader(t.AudioLoader,r);return o.useEffect((()=>{const e=f.current;e&&(e.setBuffer(p),e.setRefDistance(u),e.setLoop(c),s&&!e.isPlaying&&e.play())}),[p,l,u,c]),o.useEffect((()=>{const e=f.current;return l.add(d),()=>{l.remove(d),e&&(e.isPlaying&&e.stop(),e.source&&e.source._connected&&e.disconnect())}}),[]),o.createElement("positionalAudio",e({ref:f,args:[d]},a))}));exports.PositionalAudio=c;
