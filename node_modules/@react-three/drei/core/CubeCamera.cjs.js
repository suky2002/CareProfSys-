"use strict";var e=require("three"),r=require("react"),t=require("@react-three/fiber");function n(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var u=n(e),a=n(r);function o({resolution:n=256,near:o=.1,far:c=1e3,envMap:f,fog:s}={}){const i=t.useThree((({gl:e})=>e)),l=t.useThree((({scene:e})=>e)),b=r.useMemo((()=>{const r=new e.WebGLCubeRenderTarget(n);return r.texture.type=e.HalfFloatType,r}),[n]);r.useEffect((()=>()=>{b.dispose()}),[b]);const p=r.useMemo((()=>new u.CubeCamera(o,c,b)),[o,c,b]);let g,m;const d=a.useCallback((()=>{g=l.fog,m=l.background,l.background=f||m,l.fog=s||g,p.update(i,l),l.fog=g,l.background=m}),[i,l,p]);return{fbo:b,camera:p,update:d}}exports.CubeCamera=function({children:e,frames:r=1/0,resolution:n,near:u,far:c,envMap:f,fog:s,...i}){const l=a.useRef(null),{fbo:b,camera:p,update:g}=o({resolution:n,near:u,far:c,envMap:f,fog:s});let m=0;return t.useFrame((()=>{l.current&&(r===1/0||m<r)&&(l.current.visible=!1,g(),l.current.visible=!0,m++)})),a.createElement("group",i,a.createElement("primitive",{object:p}),a.createElement("group",{ref:l},null==e?void 0:e(b.texture)))},exports.useCubeCamera=o;
