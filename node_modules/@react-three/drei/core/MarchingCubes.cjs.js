"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("three"),t=require("react"),n=require("three-stdlib"),u=require("@react-three/fiber");function a(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var c=a(r),l=a(t);const o=l.createContext(null),s=l.forwardRef((({resolution:r=28,maxPolyCount:t=1e4,enableUvs:a=!1,enableColors:c=!1,children:s,...i},d)=>{const f=l.useRef(null);l.useImperativeHandle(d,(()=>f.current),[]);const m=l.useMemo((()=>new n.MarchingCubes(r,null,a,c,t)),[r,t,a,c]),b=l.useMemo((()=>({getParent:()=>f})),[]);return u.useFrame((()=>{m.update(),m.reset()}),-1),l.createElement(l.Fragment,null,l.createElement("primitive",e({object:m,ref:f},i),l.createElement(o.Provider,{value:b},s)))})),i=l.forwardRef((({strength:r=.5,subtract:t=12,color:n,...a},s)=>{const{getParent:i}=l.useContext(o),d=l.useMemo((()=>i()),[i]),f=l.useRef(null);l.useImperativeHandle(s,(()=>f.current),[]);const m=new c.Vector3;return u.useFrame((e=>{d.current&&f.current&&(f.current.getWorldPosition(m),d.current.addBall(.5+.5*m.x,.5+.5*m.y,.5+.5*m.z,r,t,n))})),l.createElement("group",e({ref:f},a))})),d=l.forwardRef((({planeType:r="x",strength:t=.5,subtract:n=12,...a},c)=>{const{getParent:s}=l.useContext(o),i=l.useMemo((()=>s()),[s]),d=l.useRef(null);l.useImperativeHandle(c,(()=>d.current),[]);const f=l.useMemo((()=>"x"===r?"addPlaneX":"y"===r?"addPlaneY":"addPlaneZ"),[r]);return u.useFrame((()=>{i.current&&d.current&&i.current[f](t,n)})),l.createElement("group",e({ref:d},a))}));exports.MarchingCube=i,exports.MarchingCubes=s,exports.MarchingPlane=d;
