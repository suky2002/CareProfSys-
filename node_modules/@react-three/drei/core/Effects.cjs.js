"use strict";var e=require("@babel/runtime/helpers/extends"),r=require("react"),t=require("three"),a=require("@react-three/fiber"),n=require("three-stdlib");function s(e){var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var a=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,a.get?a:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var c=s(r);const l=c.forwardRef((({children:r,multisamping:s=8,renderIndex:l=1,disableRender:u,disableGamma:i,disableRenderPass:o,depthBuffer:d=!0,stencilBuffer:f=!1,anisotropy:p=1,encoding:h,type:m,...g},b)=>{c.useMemo((()=>a.extend({EffectComposer:n.EffectComposer,RenderPass:n.RenderPass,ShaderPass:n.ShaderPass})),[]);const y=c.useRef(null);c.useImperativeHandle(b,(()=>y.current),[]);const{scene:v,camera:E,gl:x,size:P,viewport:R}=a.useThree(),[w]=c.useState((()=>{const e=new t.WebGLRenderTarget(P.width,P.height,{type:m||t.HalfFloatType,format:t.RGBAFormat,depthBuffer:d,stencilBuffer:f,anisotropy:p});return m===t.UnsignedByteType&&null!=h&&("colorSpace"in e?e.texture.colorSpace=h:e.texture.encoding=h),e.samples=s,e}));c.useEffect((()=>{var e,r;null==(e=y.current)||e.setSize(P.width,P.height),null==(r=y.current)||r.setPixelRatio(R.dpr)}),[x,P,R.dpr]),a.useFrame((()=>{var e;u||null==(e=y.current)||e.render()}),l);const C=[];return o||C.push(c.createElement("renderPass",{key:"renderpass",attach:`passes-${C.length}`,args:[v,E]})),i||C.push(c.createElement("shaderPass",{attach:`passes-${C.length}`,key:"gammapass",args:[n.GammaCorrectionShader]})),c.Children.forEach(r,(e=>{e&&C.push(c.cloneElement(e,{key:C.length,attach:`passes-${C.length}`}))})),c.createElement("effectComposer",e({ref:y,args:[x,w]},g),C)}));exports.Effects=l,exports.isWebGL2Available=()=>{try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}};
