"use strict";var e=require("@babel/runtime/helpers/extends"),t=require("react"),r=require("react-dom/client"),n=require("@react-three/fiber"),o=require("maath");function s(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var l=s(t),i=s(r);const c=l.createContext(null);function a(){return l.useContext(c)}const f=l.forwardRef((({children:e},t)=>{const r=l.useRef(null);l.useImperativeHandle(t,(()=>r.current),[]);const o=a(),{width:s,height:i}=n.useThree((e=>e.viewport));return n.useFrame((()=>{r.current.position.x=o.horizontal?-s*(o.pages-1)*o.offset:0,r.current.position.y=o.horizontal?0:i*(o.pages-1)*o.offset})),l.createElement("group",{ref:r},e)})),u=l.forwardRef((({children:t,style:r,...o},s)=>{const f=a(),u=l.useRef(null);l.useImperativeHandle(s,(()=>u.current),[]);const{width:d,height:p}=n.useThree((e=>e.size)),h=l.useContext(n.context),m=l.useMemo((()=>i.createRoot(f.fixed)),[f.fixed]);return n.useFrame((()=>{f.delta>f.eps&&(u.current.style.transform=`translate3d(${f.horizontal?-d*(f.pages-1)*f.offset:0}px,${f.horizontal?0:p*(f.pages-1)*-f.offset}px,0)`)})),m.render(l.createElement("div",e({ref:u,style:{...r,position:"absolute",top:0,left:0,willChange:"transform"}},o),l.createElement(c.Provider,{value:f},l.createElement(n.context.Provider,{value:h},t)))),null})),d=l.forwardRef((({html:t,...r},n)=>{const o=t?u:f;return l.createElement(o,e({ref:n},r))}));exports.Scroll=d,exports.ScrollControls=function({eps:e=1e-5,enabled:t=!0,infinite:r,horizontal:s,pages:i=1,distance:a=1,damping:f=.25,maxSpeed:u=1/0,prepend:d=!1,style:p={},children:h}){const{get:m,setEvents:v,gl:g,size:y,invalidate:w,events:x}=n.useThree(),[E]=l.useState((()=>document.createElement("div"))),[b]=l.useState((()=>document.createElement("div"))),[z]=l.useState((()=>document.createElement("div"))),C=g.domElement.parentNode,L=l.useRef(0),R=l.useMemo((()=>{const t={el:E,eps:e,fill:b,fixed:z,horizontal:s,damping:f,offset:0,delta:0,scroll:L,pages:i,range(e,t,r=0){const n=e-r,o=n+t+2*r;return this.offset<n?0:this.offset>o?1:(this.offset-n)/(o-n)},curve(e,t,r=0){return Math.sin(this.range(e,t,r)*Math.PI)},visible(e,t,r=0){const n=e-r,o=n+t+2*r;return this.offset>=n&&this.offset<=o}};return t}),[e,f,s,i]);l.useEffect((()=>{E.style.position="absolute",E.style.width="100%",E.style.height="100%",E.style[s?"overflowX":"overflowY"]="auto",E.style[s?"overflowY":"overflowX"]="hidden",E.style.top="0px",E.style.left="0px";for(const e in p)E.style[e]=p[e];z.style.position="sticky",z.style.top="0px",z.style.left="0px",z.style.width="100%",z.style.height="100%",z.style.overflow="hidden",E.appendChild(z),b.style.height=s?"100%":i*a*100+"%",b.style.width=s?i*a*100+"%":"100%",b.style.pointerEvents="none",E.appendChild(b),d?C.prepend(E):C.appendChild(E),E[s?"scrollLeft":"scrollTop"]=1;const e=x.connected||g.domElement;requestAnimationFrame((()=>null==x.connect?void 0:x.connect(E)));const t=m().events.compute;return v({compute(e,t){const{left:r,top:n}=C.getBoundingClientRect(),o=e.clientX-r,s=e.clientY-n;t.pointer.set(o/t.size.width*2-1,-s/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),()=>{C.removeChild(E),v({compute:t}),null==x.connect||x.connect(e)}}),[i,a,s,E,b,z,C]),l.useEffect((()=>{if(x.connected===E){const e=y[s?"width":"height"],n=E[s?"scrollWidth":"scrollHeight"],o=n-e;let l=0,i=!0,c=!0;const a=()=>{if(t&&!c&&(w(),l=E[s?"scrollLeft":"scrollTop"],L.current=l/o,r)){if(!i)if(l>=o){const e=1-R.offset;E[s?"scrollLeft":"scrollTop"]=1,L.current=R.offset=-e,i=!0}else if(l<=0){const e=1+R.offset;E[s?"scrollLeft":"scrollTop"]=n,L.current=R.offset=e,i=!0}i&&setTimeout((()=>i=!1),40)}};E.addEventListener("scroll",a,{passive:!0}),requestAnimationFrame((()=>c=!1));const f=e=>E.scrollLeft+=e.deltaY/2;return s&&E.addEventListener("wheel",f,{passive:!0}),()=>{E.removeEventListener("scroll",a),s&&E.removeEventListener("wheel",f)}}}),[E,x,y,r,R,w,s,t]);let T=0;return n.useFrame(((t,r)=>{T=R.offset,o.easing.damp(R,"offset",L.current,f,r,u,void 0,e),o.easing.damp(R,"delta",Math.abs(T-R.offset),f,r,u,void 0,e),R.delta>e&&w()})),l.createElement(c.Provider,{value:R},h)},exports.useScroll=a;
